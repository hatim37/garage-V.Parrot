{% extends 'base.html.twig' %}

{% block title %}
	{{ parent() }}- {{car.title}}
{% endblock %}

{% block body %}
	<div class="container">
		<div>
			<h1 class="mt-4">Modifier le v√©hicule {{car.title}}</h1>
			<div class="row g-3">
				{{ form_start(form) }}

				<div class="form-group col-md-10">
					{{ form_label(form.title) }}
					{{ form_widget(form.title) }}
					<div class="form-error">
						{{ form_errors(form.title) }}
					</div>
				</div>

				<div class="form-group col-md-10">
					{{ form_label(form.price) }}
					{{ form_widget(form.price) }}
					<div class="form-error">
						{{ form_errors(form.price) }}
					</div>
				</div>

				<div class="form-group col-md-10">
					{{ form_label(form.year) }}
					{{ form_widget(form.year) }}
					<div class="form-error">
						{{ form_errors(form.year) }}
					</div>
				</div>

				<div class="form-group col-md-10">
					{{ form_label(form.kilometer) }}
					{{ form_widget(form.kilometer) }}
					<div class="form-error">
						{{ form_errors(form.kilometer) }}
					</div>
				</div>

				{% if app.request.attributes.get('_route') == 'car.edit' %}
					<h4 class="mt-4 mb-4">Images :</h4>
					{% for image in car.images %}

						<div class="m-2">
							<img src="{{ asset('assets/uploads/car/' ~ image.name ) }}" alt="Image" width="150">
							<a href="{{ path('car.delete_image', { id: image.id }) }}" data-delete data-token="{{ csrf_token('delete' ~ image.id )}}" class="btn btn-warning">Supprimer</a>
						</div>
					{% endfor %}
				{% endif %}

				<div class="form-group col-md-10">
					{{ form_label(form.images) }}
					{{ form_widget(form.images) }}
					<div class="form-error">
						{{ form_errors(form.images) }}
					</div>
				</div>

				<div class="retour-edit">
				<div class="form-group col-md-1 col-sm-1 col-xs-1 mt-4">
					{{ form_label(form.submit) }}
					{{ form_widget(form.submit) }}
					
				</div>

				<div class="d-flex justify-content-evenly m-4 ">
				<a href="{{ path('car.index') }}" class="btn btn-info mt-4">Retour</a>
				</div>
				</div>

				{{ form_rest(form) }}
			</div>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
	
	<script src="{{asset('assets/js/imagesUploads.js')}}" defer></script>
{% endblock %}